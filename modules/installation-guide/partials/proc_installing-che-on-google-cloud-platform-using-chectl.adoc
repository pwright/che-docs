// Module included in the following assemblies:
//
// installing-{prod-id-short}-on-google-cloud-platform


[id="installing-{prod-id-short}-on-google-cloud-platform-using-{prod-cli}_{context}"]
= Installing {prod-short} on Google Cloud Platform using {prod-cli}

.Prerequisites

* The `{prod-cli}` management tool is available. See xref:using-the-chectl-management-tool.adoc[].

.Procedure

To install {prod-short} on Google Cloud Platform, run the following `{prod-cli}` command:

[subs="+attributes"]
----
$ {prod-cli} server:start --installer=operator --platform=k8s --domain=gcp.my-ide.cloud --multiuser
  ✔ Verify Kubernetes API...OK
  ✔ 👀  Looking for an already existing {prod} instance
    ✔ Verify if {prod} is deployed into {orch-namespace} "{prod-namespace}"...it is not
  ✔ ✈️  Kubernetes preflight checklist
    ✔ Verify if kubectl is installed
    ✔ Verify remote kubernetes status...done.
    ✔ Check Kubernetes version: Found v1.15.12-gke.2.
    ✔ Verify domain is set...set to gcp.my-ide.cloud.
    ↓ Check if cluster accessible [skipped]
{prod} logs will be available in '/var/folders/tg/_5rxbhmj4xncz4szvpgswrmc0000gn/T/{prod-cli}-logs/1596035521904'
  ✔ Start following logs
    ↓ Start following Operator logs [skipped]
    ✔ Start following {prod} logs...done
    ✔ Start following Postgres logs...done
    ✔ Start following Keycloak logs...done
    ✔ Start following Plugin registry logs...done
    ✔ Start following Devfile registry logs...done
  ✔ Start following events
    ✔ Start following {orch-namespace} events...done
 ›   Warning: Consider using the more reliable 'OLM' installer when deploying a stable release of {prod-short} (--installer=olm).
  ✔ 🏃‍  Running Helm to install {prod}
    ✔ Verify if helm is installed
    ✔ Check Helm Version: Found v3.1.2+gd878d4d
    ✔ Create Namespace (che)...does already exist.
    ✔ Check {prod} TLS certificate...TLS certificate secret found
    ✔ Check Cluster Role Binding...does not exists.
    ✔ Preparing {prod} Helm Chart...done.
    ✔ Updating Helm Chart dependencies...done.
    ✔ Deploying {prod} Helm Chart...done.
  ✔ ✅  Post installation checklist
    ✔ PostgreSQL pod bootstrap
      ✔ scheduling...done.
      ✔ downloading images...done.
      ✔ starting...done.
    ✔ Devfile registry pod bootstrap
      ✔ scheduling...done.
      ✔ downloading images...done.
      ✔ starting...done.
    ✔ Plugin registry pod bootstrap
      ✔ scheduling...done.
      ✔ downloading images...done.
      ✔ starting...done.
    ✔ {prod} pod bootstrap
      ✔ scheduling...done.
      ✔ downloading images...done.
      ✔ starting...done.
    ✔ Retrieving {prod} server URL... https://{prod-namespace}-{prod-namespace}.gcp.my-ide.cloud
    ✔ {prod} status check
  ✔ Show important messages
    ✔ Autogenerated Keycloak credentials are: "xxx:xxx"
Command server:start has completed successfully.
----

.{identity-provider} and {prod-short} with valid wildcard certificates
image::installation/keycloak-and-che-with-valid-wildcard-certs.gif[link="../_images/installation/keycloak-and-che-with-valid-wildcard-certs.gif"]

.{prod-short} user dashboard
image::installation/che-user-dashboard-gcp.png[link="../_images/installation/che-user-dashboard-gcp.png"]
